#!/usr/bin/env zsh
autoload -Uz add-zsh-hook

# -------------------------------
# Aliases
# -------------------------------
# New Alias
alias update='sudo apt update && sudo apt upgrade -y'
alias cls='clear'
alias clear='clear && generate_message'
# alias install='sudo apt install -y'    # add automated install, pass params

# file aliases (open with code for these extensions)
alias -s txt=code
alias -s py=code
alias -s json=code
alias -s pcapng=wireshark
alias -s html=code
alias -s js=code
alias -s css=code

# -------------------------------
# Functions
# -------------------------------

generate_message() {
  local hour
  hour=$(date +%H)
  hour=${hour#0}

  local RED=$'\e[0;31m'
  local GREEN=$'\e[0;32m'
  local YELLOW=$'\e[0;33m'
  local BLUE=$'\e[0;34m'
  local MAGENTA=$'\e[0;35m'
  local CYAN=$'\e[0;36m'
  local RESET=$'\e[0m'

  local -a late_night_msgs
  late_night_msgs=(
    "${RED}Wth are you doing awake, go to sleep hasshole -_-${RESET}"
    "${RED}You should be dreaming, not staring at a terminal… (╯︵╰,)${RESET}"
    "${RED}It's way too late… don't make me tuck you in ( ￣︿￣)${RESET}"
    "${RED}Sleep deprivation isn't a flex, go to bed! (눈_눈)${RESET}"
    "${RED}Your pillow misses you, don't be cruel (つ≧▽≦)つ${RESET}"
    "${RED}Go to bed, or I'll personally turn off your computer ಠ_ಠ${RESET}"
    "${RED}Still here? Your bed is warm and waiting for you (っ˘ω˘ς )💤${RESET}"
    "${RED}The stars are watching over you… sleep well, please (✿◕‿◕)${RESET}"
    "${RED}Why are you awake, the moon is tired too 🌙${RESET}"
    "${RED}Your bed is waiting patiently 🛏️${RESET}"
    "${RED}The night is silent, you should be too 🤫${RESET}"
    "${RED}Close your eyes, dreamland is calling 🌌${RESET}"
    "${RED}Even owls are yawning now 🦉${RESET}"
    "${RED}The stars whisper sleep, listen ✨${RESET}"
    "${RED}Rest now, tomorrow needs you 🌄${RESET}"
    "${RED}The world is paused, join the pause ⏸️${RESET}"

  )

  local -a morning_msgs
  morning_msgs=(
    "${YELLOW}Have you done breakfast? No? Shame on you (¬‿¬)${RESET}"
    "${YELLOW}Morning! Time to fuel up or you'll regret it later ⊂(￣▽￣)⊃${RESET}"
    "${YELLOW}No food, no energy. No energy, no life. Go eat. (ノಠ益ಠ)ノ${RESET}"
    "${YELLOW}Did you sleep well? Or are you a walking zombie? (⊙_◎)${RESET}"
    "${YELLOW}Mornin’ sunshine! The world says UwU ✨${RESET}"
    "${YELLOW}Hope you’re feeling rested, if not, go take a nap after coffee (☕˘･ᴗ･˘)${RESET}"
    "${YELLOW}Wake up, sleepyhead! The universe is waiting for you (ﾉ◕ヮ◕)ﾉ*:･ﾟ✧${RESET}"
    "${YELLOW}Stretch and shine, new day unlocked 🌞${RESET}"
    "${YELLOW}Breakfast is power up food 🍳${RESET}"
    "${YELLOW}Drink water, your brain likes it 💧${RESET}"
    "${YELLOW}Good morning champ, level up today 🕹️${RESET}"
    "${YELLOW}The sun says hi, say hi back 🌻${RESET}"
    "${YELLOW}No snooze button here, only go mode 🚀${RESET}"
    "${YELLOW}Morning vibes active, go make it count ⚡${RESET}"
    "${YELLOW}Coffee smiles at you ☕${RESET}"

  )

  local -a afternoon_msgs
  afternoon_msgs=(
    "${CYAN}Nothin to do uh? -_- Well, at least you're here.${RESET}"
    "${CYAN}Youre still alive, right? (o_O)${RESET}"
    "${CYAN}Go touch some grass, nerd ┐(￣ヘ￣)┌${RESET}"
    "${CYAN}Workin' hard or hardly workin'? (¬‿¬)${RESET}"
    "${CYAN}Hope your day's going well… If not, wanna talk? (｡• ᵕ •｡) ❤️${RESET}"
    "${CYAN}Bored? How about a nap? Or a cookie? Both? 🍪${RESET}"
    "${CYAN}Take a break, even heroes need to rest (ง’̀-'́)ง${RESET}"
    "${CYAN}If you’re feeling tired, just close your eyes for a moment…${RESET}"
    "${CYAN}Half the day is gone, keep pushing 🔥${RESET}"
    "${CYAN}Water break time, do it 💧${RESET}"
    "${CYAN}Outside exists, remember? 🌳${RESET}"
    "${CYAN}Recharge with a snack 🍪${RESET}"
    "${CYAN}Afternoon energy needs a boost ⚡${RESET}"
    "${CYAN}Sun is still shining, keep moving ☀️${RESET}"
    "${CYAN}Breathe deep, focus reset 🌬️${RESET}"
    "${CYAN}Daylight is limited, use it ⏳${RESET}"

  )

  local -a evening_msgs
  evening_msgs=(
    "${MAGENTA}C’mon, go to bed. You need your beauty sleep ( ˘︹˘ )${RESET}"
    "${MAGENTA}I see you. Still here. Why? Go rest! (*￣3￣)╭${RESET}"
    "${MAGENTA}You had a long day, right? Be kind to yourself, okay? (っ'ω')っ${RESET}"
    "${MAGENTA}Don’t make me come over there and force you to sleep ( ಠ_ಠ)${RESET}"
    "${MAGENTA}You’re still up? You better be cozy at least! (づ￣ ³￣)づ💤${RESET}"
    "${MAGENTA}Go to bed, sweetheart. You're important. Take care. (✿˶˘ ³˘)~♥${RESET}"
    "${MAGENTA}If no one told you today: I'm proud of you. Now rest, please. (っ˘з˘⌣˘)${RESET}"
    "${MAGENTA}Nighttime is for dreaming, not stressing. Let go, sleep tight. (◡‿◡✿)${RESET}"
    "${MAGENTA}Lights down, time to relax 🌙${RESET}"
    "${MAGENTA}The day is done, you did well 🌸${RESET}"
    "${MAGENTA}Peaceful thoughts only 🌌${RESET}"
    "${MAGENTA}Slow down, breathe soft 🌬️${RESET}"
    "${MAGENTA}Cozy mode activated 🛋️${RESET}"
    "${MAGENTA}Warm tea helps the night 🍵${RESET}"
    "${MAGENTA}Gratitude unlocks calm 💜${RESET}"
    "${MAGENTA}Dreams wait on the other side 🌠${RESET}"

  )

  local -a messages
  if (( hour < 6 )); then
    messages=("${(j:,:)late_night_msgs}")
    messages=( ${late_night_msgs[@]} )
  elif (( hour < 12 )); then
    messages=( ${morning_msgs[@]} )
  elif (( hour < 18 )); then
    messages=( ${afternoon_msgs[@]} )
  else
    messages=( ${evening_msgs[@]} )
  fi

  local random_index=$(( (RANDOM % ${#messages[@]}) + 1 ))
  printf '%b\n' "${messages[$random_index]}"
}

# -------------------------------
# Config prompt & environment
# -------------------------------
export HISTFILE=~/.zsh_history
export HISTSIZE=10000
export SAVEHIST=10000
setopt append_history
setopt hist_ignore_dups
setopt hist_ignore_all_dups
setopt share_history

if [[ $(id -u) -eq 0 ]]; then
  printf '%b\n%b\n'
  generate_message
else
  generate_message
fi



prompt_uid_check(){
  if [[ $(id -u) -eq 0 ]]; then
    PROMPT=$'%F{red}%B%n@%m%f:%F{magenta}%B%~%f%b\n%F{white}root> '
    RPROMPT='%F{yellow}%D{%H:%M:%S}%f'
    export LS_COLORS='di=1;34:fi=0;32:ln=1;36:pi=40;33:so=1;35:do=1;33:bd=1;33'
  else
    PROMPT=$'%F{blue}%B%n@%m%f:%F{magenta}%B%~%f%b\n%F{white}#> '
    RPROMPT='%F{yellow}%D{%H:%M:%S}%f'
    export LS_COLORS='di=1;34:fi=0;32:ln=1;36:pi=40;33:so=1;35:do=1;33:bd=1;33'
  fi
}

add-zsh-hook precmd prompt_uid_check

# -------------------------------
# EOF
# -------------------------------